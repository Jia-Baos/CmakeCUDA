# Matrix Mutiple Tile

## 问题

1. A[row][k] 被同一行的线程重复读了 M 次
2. B[k][col] 被同一列的线程重复读了 N 次
3. 数据被重复读取，浪费带宽

## 优化方案

1. 把重复用的数据缓存到共享内存中
2. 一次读取，多次使用
3. 减少全区内存访问 16 倍

## 核心概念

### ```Tiling```矩阵分块思想

把大矩阵分成小块（tiles）去处理
1. 原始矩阵（1024 x 1024）太大，分成 16 x 16 的小块
2. 每个 tile = 16 x 16 = 256，刚好一个 Block 的线程数

### ```Tile```加载策略

逐步加载 tiles（假设 K 有 4 个tiles）

```C++
第 0 步：加载 A_tile0 和 B_tile0 计算部分和 1
第 1 步：加载 A_tile1 和 B_tile1 计算部分和 2
第 2 步：加载 A_tile2 和 B_tile2 计算部分和 3
第 3 步：加载 A_tile3 和 B_tile3 计算部分和 4
最后：   sum = 部分和1 + 部分和2 + 部分和3 + 部分和4
```
